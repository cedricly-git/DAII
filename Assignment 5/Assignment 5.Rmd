---
title: "Assignment 5"
author:
  - Leonardo Gonnelli (23-617-111)
  - Cédric Ly (23-615-487)
  - Simon Gerdolle (23-611-940)
output: html_document
date: "2025-05-09"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

```{r}
library(tidyverse)
```

Import the data:
```{r}
df <- read_csv("education_income-3.csv")
skimr::skim(df)
view(df)
```

*Part 0*

As we are trying to understand the correlation (or maybe further the causality) between education and income, we will need to drop the observations where one of those variables are unknown. We see that there is 1340 observations where the income and college variables are unknown. **For now, we don't know if we need to drop the observations where hhincome is unknown**.

```{r}
df_clean <- df %>%
  filter(income>=0)

skimr::skim(df_clean)
view(df_clean)
```
We can now proceed to the next task.

*Part 1.1*

We want to investigate whether an increase in the scholarship value received by a student at the beginning at college has an effect on their income 10 years later. To do so, we estimate the following linear regression model where income 10 years later is regressed on the scholarship amount received.

$$income = \alpha_0 + \alpha_1scholarship + u $$

```{r}
model <- lm(data = df_clean, income ~ scholarship)

summary(model)
```
Here, the intercept $\alpha_0$ shows the expected income for an individual who would have received 0USD of scholarship value, which is irrelevant for our analysis as we are working only on ex-students that received at least 10kUSD of scholarship value. To ensure the intercept is interpretable, we center the scholarship variable at its minimum observed value. 

```{r}
df_clean$scholarship_mincentered <- df_clean$scholarship - min(df_clean$scholarship)
```

```{r}
model <- lm(data = df_clean, income ~ scholarship_mincentered)

summary(model)
```
The results are the same, except we now have the exact intercept for the minimum observed scholarship value, i.e. 10,000 USD:

$\alpha_0$ = 125.148: the estimated income 10 years after high school graduation for a student who received the minimum scholarship amount (10,000 USD).

$\alpha_1$ = 0.16145: the estimated coefficient for scholarship indicates that for each additional 1,000 USD received, future income increases by approximately 161.45 USD.

As the p-value is below 0.001, the result is statistically significant. However, the R-squared is very low (R^2 = 0.0007), suggesting that scholarship alone explains only a small share of the variation in income—many other factors likely play a more important role.

*Part 1.2*

For this task, we are asked to check whether the effect of a scholarship on income has changed over time. In order to do this, we need to estimate the following multivariate linear regression model :
$$ income = \alpha_0 + \alpha_1\cdot scholarship + \alpha_2 \cdot year + \alpha_3 \cdot (scholarship \times year) + u$$
**Null and alternative hypotheses**

- Null hypothesis $H_0$: $\alpha_3 = 0$, i.e. the effect of scholarship on income did not change over time.
- Alternative hypothesis $H_1$: $\alpha_3 \neq 0$, i.e. the effect of scholarship on income did change over time.

To estimate our linear regression model, we first need to center the year variable at 2000 (in order to get an interpretable intercept, otherwise our intercept $\alpha_0$ will give us the expected income at year 0 which is irrelevant for us):

```{r}
df_clean$year_mincentered <- df_clean$year - min(df_clean$year)
view(df_clean)
```

Then, we need to compute the interaction between the scholarship and the year variables:
```{r}
df_clean$interaction <- df_clean$scholarship * df_clean$year
view(df_clean)
```

Now, we an run our model:
```{r}
model_interaction <- lm(income ~ scholarship_mincentered + year_mincentered + interaction, data = df_clean)
summary(model_interaction)
```

We observe that the the estimated interaction $\alpha_3 = -0.0008$ with a se of 0.0093, a t-statistic of -0.086 and a **p-value of 0.9317**.
Because the p-value is very high compared to the conventional significance level (0.05), **we fail to reject the null hypothesis** $H_0$, there is no statistical evidence that the effect of scholarship on income has changed over time.

*Part 1.3*
To estimate the causal effect, we consider the following model:

$$income = \beta_0 + \beta_1 \cdot college_i + \epsilon_i $$